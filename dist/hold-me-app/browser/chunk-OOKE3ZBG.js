import{a as X,b as Z}from"./chunk-XMT2JEOJ.js";import{b as he,c as _e}from"./chunk-ORGNW3Y3.js";import{$ as D,K as ue,L as I,M as F,N as k,Pa as K,Q as R,Qa as W,S as T,Sa as fe,T as d,Ta as ge,V as L,W as N,Z as B,aa as U,fa as V,ga as A,ha as j,ia as q,ja as H,ka as z,la as G,ma as Q,oa as Y,pa as J}from"./chunk-HZW7XIXB.js";import{i as de,j as w,k as P,q as O}from"./chunk-F5HGMHQ5.js";import"./chunk-Q64FFBLU.js";import{Ab as t,Bb as p,Cb as ae,Db as le,Fb as v,Ib as f,Kb as C,Lc as E,Ob as me,Pb as se,Qb as pe,Qc as S,Ta as oe,Tb as M,Ub as o,Vb as y,Wa as l,a as re,b as ne,bc as b,da as u,ha as g,ic as ce,lb as c,pb as x,qa as h,qb as m,ra as _,zb as e}from"./chunk-MWU7JMLF.js";var $=class n{static \u0275fac=function(a){return new(a||n)};static \u0275cmp=g({type:n,selectors:[["app-auth-layout"]],standalone:!0,features:[b],decls:4,vars:0,template:function(a,i){a&1&&(p(0,"app-navbar"),e(1,"div"),p(2,"router-outlet"),t(),p(3,"app-footer"))},dependencies:[fe,ge,de],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;justify-content:center;align-items:center;padding:20px}.content-wrapper[_ngcontent-%COMP%]{padding:20px}"]})};function Oe(n,r){n&1&&(e(0,"mat-error"),o(1,"Este campo es obligatorio"),t())}function Ie(n,r){n&1&&(e(0,"mat-error"),o(1,"Introduce un correo electr\xF3nico v\xE1lido"),t())}function Fe(n,r){n&1&&(e(0,"mat-error"),o(1,"Este campo es obligatorio"),t())}function ke(n,r){n&1&&(e(0,"span"),o(1,"Iniciar Sesi\xF3n"),t())}function Re(n,r){n&1&&p(0,"mat-spinner",18)}var ee=class n{imagePath="0ff0d656-7189-48bc-b34c-f6dfcbf88579.png";loginForm;hidePassword=!0;isLoading=!1;fb=u(V);router=u(w);snackBar=u(K);authService=u(O);ADMIN_ROLE="ADMIN";CUSTOMER_ROLE="CUSTOMER";ADMIN_ROUTE="/admin/events/list";CUSTOMER_ROUTE="/customer/catalog";DEFAULT_ROUTE="/home";constructor(){this.loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required]]})}controlHasError(r,a){return this.loginForm.controls[r].hasError(a)}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0;let r=this.loginForm.value;this.authService.login(r).subscribe({next:()=>{this.showSnackBar("Inicio de sesion exitoso"),this.redirectUserBasedOnRole()},error:()=>{this.showSnackBar("Error en el inicio de sesion. Por favor, intenta de nuevo")},complete:()=>{this.isLoading=!1}})}redirectUserBasedOnRole(){let r=this.authService.getUserRole();setTimeout(()=>{r===this.CUSTOMER_ROLE?this.router.navigate([this.CUSTOMER_ROUTE]):r===this.ADMIN_ROLE?this.router.navigate([this.ADMIN_ROUTE]):this.router.navigate([this.DEFAULT_ROUTE])},2e3)}showSnackBar(r){this.snackBar.open(r,"Cerrar",{duration:3e3,verticalPosition:"top"})}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=g({type:n,selectors:[["app-login"]],standalone:!0,features:[b],decls:35,vars:11,consts:[[1,"login-container"],[1,"login-card"],[1,"login-image"],[1,"login-overlay"],[1,"login-text"],[1,"login-description"],[1,"login-form"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"form-field"],["matInput","","formControlName","email","type","email","placeholder","tu.correo@ejemplo.com"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Ingresa tu contrase\xF1a",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"],["diameter","24",4,"ngIf"],[1,"register-link"],["routerLink","/auth/register"],["diameter","24"]],template:function(a,i){a&1&&(e(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),o(5,"Bienvenido a HoldMe"),t(),e(6,"p",5),o(7,"Un espacio seguro para tu bienestar mental. Inicia sesi\xF3n para comenzar tu viaje hacia una mejor salud emocional."),t()()(),e(8,"div",6)(9,"h2"),o(10,"Iniciar Sesi\xF3n"),t(),e(11,"form",7),f("ngSubmit",function(){return i.onSubmit()}),e(12,"mat-form-field",8)(13,"mat-label"),o(14,"Correo Electr\xF3nico"),t(),p(15,"input",9),e(16,"mat-icon",10),o(17,"email"),t(),c(18,Oe,2,0,"mat-error",11)(19,Ie,2,0,"mat-error",11),t(),e(20,"mat-form-field",8)(21,"mat-label"),o(22,"Contrase\xF1a"),t(),p(23,"input",12),e(24,"button",13),f("click",function(){return i.togglePasswordVisibility()}),e(25,"mat-icon"),o(26),t()(),c(27,Fe,2,0,"mat-error",11),t(),e(28,"button",14),c(29,ke,2,0,"span",11)(30,Re,1,0,"mat-spinner",15),t()(),e(31,"p",16),o(32,"\xBFNo tienes una cuenta? "),e(33,"a",17),o(34,"Reg\xEDstrate aqu\xED"),t()()()()()),a&2&&(l(11),m("formGroup",i.loginForm),l(7),m("ngIf",i.controlHasError("email","required")),l(),m("ngIf",i.controlHasError("email","email")),l(4),m("type",i.hidePassword?"password":"text"),l(),x("aria-label","Hide password")("aria-pressed",i.hidePassword),l(2),y(i.hidePassword?"visibility_off":"visibility"),l(),m("ngIf",i.controlHasError("password","required")),l(),m("disabled",i.loginForm.invalid||i.isLoading),l(),m("ngIf",!i.isLoading),l(),m("ngIf",i.isLoading))},dependencies:[A,B,T,L,N,j,D,U,H,q,R,I,F,k,ue,W,J,Q,Y,P,S,E,Z,X,he,G,z],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#e0f2f1,#b2ebf2);padding:20px}.login-card[_ngcontent-%COMP%]{display:flex;background-color:#fff;border-radius:20px;overflow:hidden;box-shadow:0 10px 20px #0000001a;max-width:1000px;width:100%}.login-image[_ngcontent-%COMP%]{flex:1;background-image:url(/assets/mental-health-image.jpg);background-size:cover;background-position:center;position:relative}.login-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#009688cc;display:flex;flex-direction:column;justify-content:center;padding:40px;color:#fff}.login-text[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:20px;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.login-description[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.5;text-shadow:1px 1px 2px rgba(0,0,0,.2)}.login-form[_ngcontent-%COMP%]{flex:1;padding:40px;display:flex;flex-direction:column}h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:30px;color:#00796b;text-align:center}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}  .mat-form-field-appearance-outline .mat-form-field-outline{color:#26a69a}  .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:#00897b}  .mat-form-field-appearance-outline.mat-form-field-invalid.mat-form-field-invalid .mat-form-field-outline-thick{color:#f44336}  .mat-form-field-label{color:#0009}  .mat-form-field.mat-focused .mat-form-field-label{color:#00897b}.submit-button[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:1.1rem;margin-top:20px;background-color:#00897b;color:#fff;border:none;border-radius:30px;cursor:pointer;transition:all .3s ease;display:flex;justify-content:center;align-items:center}.submit-button[_ngcontent-%COMP%]:hover{background-color:#00796b;transform:translateY(-2px);box-shadow:0 4px 8px #0003}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#b2dfdb;cursor:not-allowed;transform:none;box-shadow:none}.register-link[_ngcontent-%COMP%]{margin-top:20px;text-align:center;font-size:.9rem}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00897b;text-decoration:none;font-weight:700;transition:color .3s ease}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#00796b;text-decoration:underline}@media (max-width: 768px){.login-card[_ngcontent-%COMP%]{flex-direction:column}.login-image[_ngcontent-%COMP%]{height:200px}.login-form[_ngcontent-%COMP%]{padding:20px}}"]})};var Te=["fileInput"];function Le(n,r){if(n&1){let a=v();ae(0),e(1,"button",27),f("click",function(){h(a),C();let s=M(17);return _(s.click())}),e(2,"mat-icon"),o(3,"add_a_photo"),t(),e(4,"span"),o(5,"A\xF1ade una foto de perfil (opcional)"),t()(),le()}}function Ne(n,r){if(n&1){let a=v();e(0,"div",28),p(1,"img",29),e(2,"div",30),f("click",function(){h(a),C();let s=M(17);return _(s.click())}),e(3,"mat-icon"),o(4,"edit"),t()()()}if(n&2){let a=C();l(),m("src",a.profileImagePreview,oe)}}function Be(n,r){n&1&&(e(0,"mat-error"),o(1,"Este campo es necesario"),t())}function De(n,r){n&1&&(e(0,"mat-error"),o(1,"Este campo es necesario"),t())}function Ue(n,r){n&1&&(e(0,"mat-error"),o(1,"Este campo es necesario"),t())}function Ve(n,r){n&1&&(e(0,"mat-error"),o(1,"Por favor, introduce un correo electr\xF3nico v\xE1lido"),t())}function Ae(n,r){n&1&&(e(0,"mat-error"),o(1,"Este campo es necesario"),t())}function je(n,r){n&1&&(e(0,"mat-error"),o(1,"La contrase\xF1a debe tener al menos 8 caracteres"),t())}function qe(n,r){n&1&&(e(0,"mat-error"),o(1,"Este campo es necesario"),t())}function He(n,r){n&1&&(e(0,"span"),o(1,"Unirme a MindfulMe"),t())}function ze(n,r){n&1&&p(0,"mat-spinner",31)}var te=class n{fileInput;imagePath="mindful-image.jpg";registerForm;profileImagePreview=null;selectedFile=null;isLoading=!1;hidePassword=!0;fb=u(V);router=u(w);snackBar=u(K);authService=u(O);mediaService=u(_e);constructor(){this.registerForm=this.fb.group({firstName:["",d.required],lastName:["",d.required],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(8)]],reason:["",d.required],profilePicPath:[""]})}controlHasError(r,a){return this.registerForm.controls[r].hasError(a)}onFileSelected(r){let a=r.target.files?.[0];if(a){this.selectedFile=a;let i=new FileReader;i.onload=s=>this.profileImagePreview=s.target?.result,i.readAsDataURL(a)}}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}onSubmit(){if(this.registerForm.valid)if(this.isLoading=!0,this.selectedFile){let r=new FormData;r.append("file",this.selectedFile),this.mediaService.upload(r).subscribe({next:a=>{let i=ne(re({},this.registerForm.value),{profilePicPath:a.path});this.registerUser(i)},error:a=>{this.showSnackBar("Error al cargar la imagen de perfil. Por favor, int\xE9ntalo de nuevo."),console.error("Error uploading profile picture:",a),this.isLoading=!1}})}else this.registerUser(this.registerForm.value)}registerUser(r){this.authService.register(r).subscribe({next:()=>{this.showSnackBar("\xA1Bienvenido a MindfulMe! Tu cuenta ha sido creada."),this.router.navigate(["/auth/login"])},error:a=>{this.showSnackBar(a.error.message||"Error al registrar el usuario. Por favor, int\xE9ntalo de nuevo."),console.error("Error registering user:",a)},complete:()=>{this.isLoading=!1}})}showSnackBar(r){this.snackBar.open(r,"Cerrar",{duration:5e3,verticalPosition:"top"})}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=g({type:n,selectors:[["app-register"]],viewQuery:function(a,i){if(a&1&&me(Te,5),a&2){let s;se(s=pe())&&(i.fileInput=s.first)}},standalone:!0,features:[b],decls:64,vars:17,consts:[["profilePreview",""],["fileInput",""],[1,"register-container"],[1,"register-card"],[1,"register-image"],[1,"register-overlay"],[1,"register-text"],[1,"register-description"],[1,"register-form"],[3,"ngSubmit","formGroup"],[1,"profile-picture-section"],[4,"ngIf","ngIfElse"],["type","file","hidden","","accept","image/*",3,"change"],[1,"form-row"],[1,"form-field"],["matInput","","formControlName","firstName","placeholder","Tu nombre"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","lastName","placeholder","Tu apellido"],["matInput","","formControlName","email","type","email","placeholder","tu.correo@ejemplo.com"],["matInput","","formControlName","password","placeholder","Crea una contrase\xF1a segura",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","reason","placeholder","Ej: Busco apoyo para el estr\xE9s"],["mat-raised-button","","color","primary","type","submit",1,"submit-button",3,"disabled"],["diameter","24",4,"ngIf"],[1,"login-link"],["routerLink","/auth/login"],["type","button",1,"upload-btn",3,"click"],[1,"avatar"],["alt","Foto de perfil",1,"avatar-image",3,"src"],[1,"avatar-overlay",3,"click"],["diameter","24"]],template:function(a,i){if(a&1){let s=v();e(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h3",6),o(5,"Bienvenido a MindfulMe"),t(),e(6,"p",7),o(7,"Un espacio seguro para tu bienestar mental. \xDAnete a nuestra comunidad de apoyo y comienza tu viaje hacia una mejor salud emocional."),t()()(),e(8,"div",8)(9,"h2"),o(10,"Crea tu cuenta de apoyo"),t(),e(11,"form",9),f("ngSubmit",function(){return h(s),_(i.onSubmit())}),e(12,"div",10),c(13,Le,6,0,"ng-container",11)(14,Ne,5,1,"ng-template",null,0,ce),e(16,"input",12,1),f("change",function(ve){return h(s),_(i.onFileSelected(ve))}),t()(),e(18,"div",13)(19,"mat-form-field",14)(20,"mat-label"),o(21,"Nombre"),t(),p(22,"input",15),e(23,"mat-icon",16),o(24,"person"),t(),c(25,Be,2,0,"mat-error",17),t(),e(26,"mat-form-field",14)(27,"mat-label"),o(28,"Apellido"),t(),p(29,"input",18),e(30,"mat-icon",16),o(31,"person"),t(),c(32,De,2,0,"mat-error",17),t()(),e(33,"mat-form-field",14)(34,"mat-label"),o(35,"Correo Electr\xF3nico"),t(),p(36,"input",19),e(37,"mat-icon",16),o(38,"email"),t(),c(39,Ue,2,0,"mat-error",17)(40,Ve,2,0,"mat-error",17),t(),e(41,"mat-form-field",14)(42,"mat-label"),o(43,"Contrase\xF1a"),t(),p(44,"input",20),e(45,"button",21),f("click",function(){return h(s),_(i.togglePasswordVisibility())}),e(46,"mat-icon"),o(47),t()(),c(48,Ae,2,0,"mat-error",17)(49,je,2,0,"mat-error",17),t(),e(50,"mat-form-field",14)(51,"mat-label"),o(52,"\xBFQu\xE9 te trae a HoldMe?"),t(),p(53,"input",22),e(54,"mat-icon",16),o(55,"psychology"),t(),c(56,qe,2,0,"mat-error",17),t(),e(57,"button",23),c(58,He,2,0,"span",17)(59,ze,1,0,"mat-spinner",24),t()(),e(60,"p",25),o(61,"\xBFYa tienes una cuenta? "),e(62,"a",26),o(63,"Inicia sesi\xF3n aqu\xED"),t()()()()()}if(a&2){let s=M(15);l(11),m("formGroup",i.registerForm),l(2),m("ngIf",!i.profileImagePreview)("ngIfElse",s),l(12),m("ngIf",i.controlHasError("firstName","required")),l(7),m("ngIf",i.controlHasError("lastName","required")),l(7),m("ngIf",i.controlHasError("email","required")),l(),m("ngIf",i.controlHasError("email","email")),l(4),m("type",i.hidePassword?"password":"text"),l(),x("aria-label","Toggle password visibility")("aria-pressed",!i.hidePassword),l(2),y(i.hidePassword?"visibility_off":"visibility"),l(),m("ngIf",i.controlHasError("password","required")),l(),m("ngIf",i.controlHasError("password","minlength")),l(7),m("ngIf",i.controlHasError("reason","required")),l(),m("disabled",i.registerForm.invalid||i.isLoading),l(),m("ngIf",!i.isLoading),l(),m("ngIf",i.isLoading)}},dependencies:[S,E,J,Q,Y,H,q,R,I,F,k,P,A,B,T,L,N,j,D,U,W,G,z,Z,X],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#e0f7fa,#b2ebf2);padding:20px}.register-card[_ngcontent-%COMP%]{display:flex;background-color:#fff;border-radius:20px;overflow:hidden;box-shadow:0 10px 20px #0000001a;max-width:1000px;width:100%}.register-image[_ngcontent-%COMP%]{flex:1;background-image:url(/assets/mindful-image.jpg);background-size:cover;background-position:center;position:relative}.register-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#009688cc;display:flex;flex-direction:column;justify-content:center;padding:40px;color:#fff}.register-text[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:20px;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.register-description[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.5;text-shadow:1px 1px 2px rgba(0,0,0,.2)}.register-form[_ngcontent-%COMP%]{flex:1;padding:40px;display:flex;flex-direction:column}h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:30px;color:#00897b;text-align:center}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px}.form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{flex:1}  .mat-form-field-appearance-outline .mat-form-field-outline{color:#26a69a}  .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:#00897b}  .mat-form-field-appearance-outline.mat-form-field-invalid.mat-form-field-invalid .mat-form-field-outline-thick{color:#f44336}  .mat-form-field-label{color:#0009}  .mat-form-field.mat-focused .mat-form-field-label{color:#00897b}.submit-button[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:1.1rem;margin-top:20px;background-color:#00897b;color:#fff;border:none;border-radius:30px;cursor:pointer;transition:all .3s ease;display:flex;justify-content:center;align-items:center}.submit-button[_ngcontent-%COMP%]:hover{background-color:#00796b;transform:translateY(-2px);box-shadow:0 4px 8px #0003}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#b2dfdb;cursor:not-allowed;transform:none;box-shadow:none}.login-link[_ngcontent-%COMP%]{margin-top:20px;text-align:center;font-size:.9rem}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00897b;text-decoration:none;font-weight:700;transition:color .3s ease}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#00796b;text-decoration:underline}.profile-picture-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:30px}.upload-btn[_ngcontent-%COMP%]{background-color:#00897b;color:#fff;border:none;padding:12px 24px;border-radius:30px;font-weight:700;display:flex;align-items:center;gap:8px;cursor:pointer;transition:all .3s ease}.upload-btn[_ngcontent-%COMP%]:hover{background-color:#00796b;transform:translateY(-2px);box-shadow:0 4px 8px #0003}.avatar[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;overflow:hidden;margin-bottom:15px;box-shadow:0 4px 8px #0000001a;position:relative;cursor:pointer;transition:all .3s ease}.avatar[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.avatar-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#009688b3;display:flex;justify-content:center;align-items:center;opacity:0;transition:opacity .3s ease}.avatar[_ngcontent-%COMP%]:hover   .avatar-overlay[_ngcontent-%COMP%]{opacity:1}.avatar-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:36px}@media (max-width: 768px){.register-card[_ngcontent-%COMP%]{flex-direction:column}.register-image[_ngcontent-%COMP%]{height:200px}.register-form[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.profile-picture-section[_ngcontent-%COMP%]{margin-bottom:20px}.avatar[_ngcontent-%COMP%]{width:100px;height:100px}}"]})};var kt=[{path:"",component:$,children:[{path:"login",component:ee},{path:"register",component:te}]}];export{kt as authRoutes};
